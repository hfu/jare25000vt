<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title>JARE2500 with MapboxGL</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.css' rel='stylesheet' />
<link href='https://www.mapbox.com/base/latest/base.css' rel='stylesheet' />
<style>
body { margin:0; padding:0; }
#map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>
<style>
#menu {
  position: absolute;
  top:10px;
  right:10px;
  z-index: 1;
  color: white;
  cursor: pointer;
}
#menu-container {
  position: absolute;
  display: none;
  top: 50px;
  right: 10px;
  z-index: 1;
  background-color: white;
  padding: 20px;
}
</style>

<div id="menu"><span class='icon menu big'></span></div>
<div id="menu-container">
  <h4>Filter</h4>
  <div id="menu-filter" onchange="menuFilter()" class='rounded-toggle short inline'>
    <input id='filter-all' type='radio' name='rtoggle' value='all' checked='checked'>
    <label for='filter-all'>all</label>
    <input id='filter-lines' type='radio' name='rtoggle' value='lines'>
    <label for='filter-lines'>lines</label>
    <input id='filter-pts' type='radio' name='rtoggle' value='pts'>
    <label for='filter-pts'>points</label>
  </div>
</div>

<script>
var menuBtn = document.querySelector("#menu");
var menu = document.querySelector("#menu-container");
menuBtn.addEventListener('click', function() {
  if (menuBtn.className.indexOf('active') > -1) {
    menuBtn.className = '';
    menu.style.display = 'none';
  } else {
    menuBtn.className = 'active';
    menu.style.display = 'block';
  }
}, false);

function menuFilter() {
  if (document.querySelector("#filter-all").checked) {
    paint(layers.pts, 'visible');
    paint(layers.lines, 'visible');
  } else if (document.querySelector("#filter-pts").checked) {
    paint(layers.pts, 'visible');
    paint(layers.lines, 'none');
  } else if (document.querySelector("#filter-lines").checked) {
    paint(layers.pts, 'none');
    paint(layers.lines, 'visible');
  }

  function paint(layers, val) {
    layers.forEach(function(layer) {
      map.setLayoutProperty(layer, 'visibility', val)
    });
  }
}

</script>
<div id='map'></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiaGZ1IiwiYSI6ImlRSGJVUTAifQ.rTx380smyvPc1gUfZv1cmw';
scheme = 'https://';
var map = new mapboxgl.Map({
  container: 'map', style: 'mapbox://styles/mapbox/dark-v8',
  center: [44.593506,-67.954024], zoom: 14, hash: true, maxZoom: 30
});

var layers = {pts: [], lines: []}

var lightColors = [
  'FC49A3', // pink
  'CC66FF', // purple-ish
  '66CCFF', // sky blue
  '66FFCC', // teal
  '00FF00', // lime green
  'FFCC66', // light orange
  'FF6666', // salmon
  'FF0000', // red
  'FF8000', // orange
  'FFFF66', // yellow
  '00FFFF'  // turquoise
];

function randomColor(colors) {
  var randomNumber = parseInt(Math.random() * colors.length);
  return colors[randomNumber];
}

map.on('load', function () {
  map.addSource('01', {
    type: 'vector',
    tiles: [scheme + document.location.host + '/01/{z}/{x}/{y}.mvt'],
    maxzoom: 14
  });
  var layerColor = '#' + randomColor(lightColors);
  map.addLayer({
    'id': '01-lines',
    'type': 'line',
    'source': '01',
    'source-layer': '01',
    'layout': {
      'line-join': 'round',
      'line-cap': 'round'
    },
    'paint': {
      'line-color': layerColor,
      'line-width': 1
    }
  });

  map.addLayer({
    'id': '01-pts',
    'type': 'circle',
    'source': '01',
    'source-layer': '01',
    'filter': ["==", "$type", "Point"],
    'paint': {
      'circle-color': layerColor,
      'circle-radius': 2
    }
  });
  layers.lines.push('01-lines');
  layers.pts.push('01-pts');

  map.addSource('21', {
    type: 'vector',
    tiles: [scheme + document.location.host + '/21/{z}/{x}/{y}.mvt'],
    maxzoom: 14
  });
  var layerColor = '#' + randomColor(lightColors);
  map.addLayer({
    'id': '21-lines',
    'type': 'line',
    'source': '21',
    'source-layer': '21',
    'layout': {
      'line-join': 'round',
      'line-cap': 'round'
    },
    'paint': {
      'line-color': layerColor,
      'line-width': 1
    }
  });

  map.addLayer({
    'id': '21-pts',
    'type': 'circle',
    'source': '21',
    'source-layer': '21',
    'filter': ["==", "$type", "Point"],
    'paint': {
      'circle-color': layerColor,
      'circle-radius': 2
    }
  });

  layers.lines.push('21-lines');
  layers.pts.push('21-pts');

  map.addSource('31', {
    type: 'vector',
    tiles: [scheme + document.location.host + '/31/{z}/{x}/{y}.mvt'],
    maxzoom: 14
  });

  var layerColor = '#' + randomColor(lightColors);
  map.addLayer({
    'id': '31-lines',
    'type': 'line',
    'source': '31',
    'source-layer': '31',
    'layout': {
      'line-join': 'round',
      'line-cap': 'round'
    },
    'paint': {
      'line-color': layerColor,
      'line-width': 1
    }
  });

  map.addLayer({
    'id': '31-pts',
    'type': 'circle',
    'source': '31',
    'source-layer': '31',
    'filter': ["==", "$type", "Point"],
    'paint': {
      'circle-color': layerColor,
      'circle-radius': 2
    }
  });

  layers.lines.push('31-lines');
  layers.pts.push('31-pts');

  map.addSource('32', {
    type: 'vector',
    tiles: [scheme + document.location.host + '/32/{z}/{x}/{y}.mvt'],
    maxzoom: 14
  });

  var layerColor = '#' + randomColor(lightColors);
  map.addLayer({
    'id': '32-lines',
    'type': 'line',
    'source': '32',
    'source-layer': '32',
    'layout': {
      'line-join': 'round',
      'line-cap': 'round'
    },
    'paint': {
      'line-color': layerColor,
      'line-width': 1
    }
  });

  map.addLayer({
    'id': '32-pts',
    'type': 'circle',
    'source': '32',
    'source-layer': '32',
    'filter': ["==", "$type", "Point"],
    'paint': {
      'circle-color': layerColor,
      'circle-radius': 2
    }
  });

  layers.lines.push('32-lines');
  layers.pts.push('32-pts');

  map.addSource('51', {
    type: 'vector',
    tiles: [scheme + document.location.host + '/51/{z}/{x}/{y}.mvt'],
    maxzoom: 14
  });

  var layerColor = '#' + randomColor(lightColors);
  map.addLayer({
    'id': '51-lines',
    'type': 'line',
    'source': '51',
    'source-layer': '51',
    'layout': {
      'line-join': 'round',
      'line-cap': 'round'
    },
    'paint': {
      'line-color': layerColor,
      'line-width': 1
    }
  });

  map.addLayer({
    'id': '51-pts',
    'type': 'circle',
    'source': '51',
    'source-layer': '51',
    'filter': ["==", "$type", "Point"],
    'paint': {
      'circle-color': layerColor,
      'circle-radius': 2
    }
  });

  layers.lines.push('51-lines');
  layers.pts.push('51-pts');

  map.addSource('81', {
    type: 'vector',
    tiles: [scheme + document.location.host + '/81/{z}/{x}/{y}.mvt'],
    maxzoom: 14
  });
  var layerColor = '#' + randomColor(lightColors);
  map.addLayer({
    'id': '81-lines',
    'type': 'line',
    'source': '81',
    'source-layer': '81',
    'layout': {
      'line-join': 'round',
      'line-cap': 'round'
    },
    'paint': {
      'line-color': layerColor,
      'line-width': 1
    }
  });

  map.addLayer({
    'id': '81-pts',
    'type': 'circle',
    'source': '81',
    'source-layer': '81',
    'filter': ["==", "$type", "Point"],
    'paint': {
      'circle-color': layerColor,
      'circle-radius': 2
    }
  });

  layers.lines.push('81-lines');
  layers.pts.push('81-pts');

  map.addSource('82', {
    type: 'vector',
    tiles: [scheme + document.location.host + '/82/{z}/{x}/{y}.mvt'],
    maxzoom: 14
  });

  var layerColor = '#' + randomColor(lightColors);
  map.addLayer({
    'id': '82-lines',
    'type': 'line',
    'source': '82',
    'source-layer': '82',
    'layout': {
      'line-join': 'round',
      'line-cap': 'round'
    },
    'paint': {
      'line-color': layerColor,
      'line-width': 1
    }
  });

  map.addLayer({
    'id': '82-pts',
    'type': 'circle',
    'source': '82',
    'source-layer': '82',
    'filter': ["==", "$type", "Point"],
    'paint': {
      'circle-color': layerColor,
      'circle-radius': 2
    }
  });

  layers.lines.push('82-lines');
  layers.pts.push('82-pts');

  map.addSource('83', {
    type: 'vector',
    tiles: [scheme + document.location.host + '/83/{z}/{x}/{y}.mvt'],
    maxzoom: 14
  });

  var layerColor = '#' + randomColor(lightColors);

  map.addLayer({
    'id': '83-lines',
    'type': 'line',
    'source': '83',
    'source-layer': '83',
    'layout': {
      'line-join': 'round',
      'line-cap': 'round'
    },
    'paint': {
      'line-color': layerColor,
      'line-width': 1
    }
  });

  map.addLayer({
    'id': '83-pts',
    'type': 'circle',
    'source': '83',
    'source-layer': '83',
    'filter': ["==", "$type", "Point"],
    'paint': {
      'circle-color': layerColor,
      'circle-radius': 2
    }
  });

  layers.lines.push('83-lines');
  layers.pts.push('83-pts');

  map.addSource('86', {
    type: 'vector',
    tiles: [scheme + document.location.host + '/86/{z}/{x}/{y}.mvt'],
    maxzoom: 14
  });

  var layerColor = '#' + randomColor(lightColors);

  map.addLayer({
    'id': '86-lines',
    'type': 'line',
    'source': '86',
    'source-layer': '86',
    'layout': {
      'line-join': 'round',
      'line-cap': 'round'
    },
    'paint': {
      'line-color': layerColor,
      'line-width': 1
    }
  });

  map.addLayer({
    'id': '86-pts',
    'type': 'circle',
    'source': '86',
    'source-layer': '86',
    'filter': ["==", "$type", "Point"],
    'paint': {
      'circle-color': layerColor,
      'circle-radius': 2
    }
  });

  layers.lines.push('86-lines');
  layers.pts.push('86-pts');

  map.addSource('88', {
    type: 'vector',
    tiles: [scheme + document.location.host + '/88/{z}/{x}/{y}.mvt'],
    maxzoom: 14
  });
  var layerColor = '#' + randomColor(lightColors);
  map.addLayer({
    'id': '88-lines',
    'type': 'line',
    'source': '88',
    'source-layer': '88',
    'layout': {
      'line-join': 'round',
      'line-cap': 'round'
    },
    'paint': {
      'line-color': layerColor,
      'line-width': 1
    }
  });

  map.addLayer({
    'id': '88-pts',
    'type': 'circle',
    'source': '88',
    'source-layer': '88',
    'filter': ["==", "$type", "Point"],
    'paint': {
      'circle-color': layerColor,
      'circle-radius': 2
    }
  });

  layers.lines.push('88-lines');
  layers.pts.push('88-pts');

  map.addSource('92', {
    type: 'vector',
    tiles: [scheme + document.location.host + '/92/{z}/{x}/{y}.mvt'],
    maxzoom: 14
  });

  var layerColor = '#' + randomColor(lightColors);

  map.addLayer({
    'id': '92-lines',
    'type': 'line',
    'source': '92',
    'source-layer': '92',
    'layout': {
      'line-join': 'round',
      'line-cap': 'round'
    },
    'paint': {
      'line-color': layerColor,
      'line-width': 1
    }
  });

  map.addLayer({
    'id': '92-pts',
    'type': 'circle',
    'source': '92',
    'source-layer': '92',
    'filter': ["==", "$type", "Point"],
    'paint': {
      'circle-color': layerColor,
      'circle-radius': 2
    }
  });

  layers.lines.push('92-lines');
  layers.pts.push('92-pts');

  map.addSource('95', {
    type: 'vector',
    tiles: [scheme + document.location.host + '/95/{z}/{x}/{y}.mvt'],
    maxzoom: 14
  });

  var layerColor = '#' + randomColor(lightColors);

  map.addLayer({
    'id': '95-lines',
    'type': 'line',
    'source': '95',
    'source-layer': '95',
    'layout': {
      'line-join': 'round',
      'line-cap': 'round'
    },
    'paint': {
      'line-color': layerColor,
      'line-width': 1
    }
  });

  map.addLayer({
    'id': '95-pts',
    'type': 'circle',
    'source': '95',
    'source-layer': '95',
    'filter': ["==", "$type", "Point"],
    'paint': {
      'circle-color': layerColor,
      'circle-radius': 2
    }
  });

  layers.lines.push('95-lines');
  layers.pts.push('95-pts');

  map.addSource('96', {
    type: 'vector',
    tiles: [scheme + document.location.host + '/96/{z}/{x}/{y}.mvt'],
    maxzoom: 14
  });
  var layerColor = '#' + randomColor(lightColors);

  map.addLayer({
    'id': '96-lines',
    'type': 'line',
    'source': '96',
    'source-layer': '96',
    'layout': {
      'line-join': 'round',
      'line-cap': 'round'
    },
    'paint': {
      'line-color': layerColor,
      'line-width': 1
    }
  });

  map.addLayer({
    'id': '96-pts',
    'type': 'circle',
    'source': '96.mbtiles',
    'source-layer': '96',
    'filter': ["==", "$type", "Point"],
    'paint': {
      'circle-color': layerColor,
      'circle-radius': 2
    }
  });

  layers.lines.push('96-lines');
  layers.pts.push('96-pts');
});
</script>
</body>
</html>
